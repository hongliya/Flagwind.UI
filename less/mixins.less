//
// * Flagwind.UI v1.0.0
// * Copyright 2014 Flagwind Inc. All rights reserved.
// * Licensed under the MIT License.
// * https://github.com/Flagwind/Flagwind.UI/blob/master/LICENSE
//

// ============================= 通用(Normal) ============================ //

.transition(@transition)
{
    -webkit-transition: @transition;
         -o-transition: @transition;
            transition: @transition;
}

.transition-property(@transition-property)
{
    -webkit-transition-property: @transition-property;
            transition-property: @transition-property;
}

.transition-delay(@transition-delay)
{
    -webkit-transition-delay: @transition-delay;
            transition-delay: @transition-delay;
}

.transition-duration(@transition-duration)
{
    -webkit-transition-duration: @transition-duration;
            transition-duration: @transition-duration;
}

.transition-timing-function(@timing-function)
{
    -webkit-transition-timing-function: @timing-function;
            transition-timing-function: @timing-function;
}

.transition-transform(@transition)
{
    -webkit-transition: -webkit-transform @transition;
       -moz-transition: -moz-transform @transition;
         -o-transition: -o-transform @transition;
            transition: transform @transition;
}

//
// #public 清除浮动。
//
.clearfix()
{
    &:before,
    &:after
    {
        display: table;
        content: " ";
    }

    &:after
    {
        clear: both;
    }
}

// ============================= 图片(Image) ============================= //

.img-responsive(@display: block)
{
    display: @display;
    max-width: 100%;
    height: auto;
}

// ============================= 布局(Layout) ============================ //

//
// #public 显示元素。
//
.responsive-visibility()
{
    display: block !important;

    table&
    {
        display: table;
    }

    tr&
    {
        display: table-row !important;
    }

    th&,
    td&
    {
        display: table-cell !important;
    }
}

//
// #public 隐藏元素。
//
.responsive-invisibility()
{
    display: none !important;
}

//
// #public 生成一个布局。
//
.build-layout()
{
    margin-right: auto;
    margin-left: auto;
    &:extend(.clearfix all);

    @media (min-width: @screen-sm-min)
    {
        width: @layout-sm;
    }

    @media (min-width: @screen-md-min)
    {
        width: @layout-md;
    }

    @media (min-width: @screen-lg-min)
    {
        width: @layout-lg;
    }

    .layout,
    {
        width: auto;
        margin-right: -(@layout-gutter-width / 2);
        margin-left: -(@layout-gutter-width / 2);
    }
}

//
// #public 定义布局份数。
//
.define-layout-flexes()
{
    .flex(@index)
    {
        @item: ~".flex-xs-@{index}, .flex-sm-@{index}, .flex-md-@{index}, .flex-lg-@{index}";

        .flex((@index + 1), @item);
    }

    .flex(@index, @list) when (@index =< @layout-flexes)
    {
        @item: ~".flex-xs-@{index}, .flex-sm-@{index}, .flex-md-@{index}, .flex-lg-@{index}";

        .flex((@index + 1), ~"@{list}, @{item}");
    }

    .flex(@index, @list) when (@index > @layout-flexes)
    {
        @{list}
        {
            position: relative;
            min-height: 1px;
            padding-left: (@layout-gutter-width / 2);
            padding-right: (@layout-gutter-width / 2);
        }
    }

    .flex(1);
}

//
// #public 生成指定尺寸的布局份数。
//
// #param @size [xs|sm|md|lg] 必选项，尺寸。
//
.build-layout-flex(@size)
{
    .float-layout-flexes(@size);
    .loop-layout-flexes(width, @layout-flexes, @size);
    .loop-layout-flexes(push, @layout-flexes, @size);
    .loop-layout-flexes(pull, @layout-flexes, @size);
    .loop-layout-flexes(offset, @layout-flexes, @size);
}

//
// #public 生成超小屏幕(xs)布局份数。
//
// #param @flexes [number] 必选项，所占数。
//
.build-layout-xs-flex(@flexes; @gutter: @layout-gutter-width)
{
    position: relative;
    float: left;
    width: percentage((@flexes / @layout-flexes));
    min-height: 1px;
    padding-left:  (@gutter / 2);
    padding-right: (@gutter / 2);
}

.build-layout-xs-flex-offset(@flexes)
{
    margin-left: percentage((@flexes / @layout-flexes));
}

.build-layout-xs-flex-push(@flexes)
{
    left: percentage((@flexes / @layout-flexes));
}

.build-layout-xs-flex-pull(@flexes)
{
    right: percentage((@flexes / @layout-flexes));
}

//
// #public 生成小屏幕(sm)布局份数。
//
// #param @flexes [number] 必选项，所占数。
//
.build-layout-sm-flex(@flexes; @gutter: @layout-gutter-width)
{
    position: relative;
    min-height: 1px;
    padding-left:  (@gutter / 2);
    padding-right: (@gutter / 2);

    @media (min-width: @screen-sm-min)
    {
        float: left;
        width: percentage((@flexes / @layout-flexes));
    }
}

.build-layout-sm-flex-offset(@flexes)
{
    @media (min-width: @screen-sm-min)
    {
        margin-left: percentage((@flexes / @layout-flexes));
    }
}

.build-layout-sm-flex-push(@flexes)
{
    @media (min-width: @screen-sm-min)
    {
        left: percentage((@flexes / @layout-flexes));
    }
}

.build-layout-sm-flex-pull(@flexes)
{
    @media (min-width: @screen-sm-min)
    {
        right: percentage((@flexes / @layout-flexes));
    }
}

//
// #public 生成中等屏幕(md)布局份数。
//
// #param @flexes [number] 必选项，所占数。
//
.build-layout-md-flex(@flexes; @gutter: @layout-gutter-width)
{
    position: relative;
    min-height: 1px;
    padding-left:  (@gutter / 2);
    padding-right: (@gutter / 2);

    @media (min-width: @screen-md-min)
    {
        float: left;
        width: percentage((@flexes / @layout-flexes));
    }
}

.build-layout-md-flex-offset(@flexes)
{
    @media (min-width: @screen-md-min)
    {
        margin-left: percentage((@flexes / @layout-flexes));
    }
}

.build-layout-md-flex-push(@flexes)
{
    @media (min-width: @screen-md-min)
    {
        left: percentage((@flexes / @layout-flexes));
    }
}

.build-layout-md-flex-pull(@flexes)
{
    @media (min-width: @screen-md-min)
    {
        right: percentage((@flexes / @layout-flexes));
    }
}

//
// #public 生成大屏幕(lg)布局份数。
//
// #param @flexes [number] 必选项，所占数。
//
.build-layout-lg-flex(@flexes; @gutter: @layout-gutter-width)
{
    position: relative;
    min-height: 1px;
    padding-left:  (@gutter / 2);
    padding-right: (@gutter / 2);

    @media (min-width: @screen-lg-min)
    {
        float: left;
        width: percentage((@flexes / @layout-flexes));
    }
}

.build-layout-lg-flex-offset(@flexes)
{
    @media (min-width: @screen-lg-min)
    {
        margin-left: percentage((@flexes / @layout-flexes));
    }
}

.build-layout-lg-flex-push(@flexes)
{
    @media (min-width: @screen-lg-min)
    {
        left: percentage((@flexes / @layout-flexes));
    }
}

.build-layout-lg-flex-pull(@flexes)
{
    @media (min-width: @screen-lg-min)
    {
        right: percentage((@flexes / @layout-flexes));
    }
}

//
// #private 浮动布局份数。
//
// #param @size [xs|sm|md|lg] 必选项，尺寸。
//
.float-layout-flexes(@size)
{
    .flex(@index)
    {
        @item: ~".flex-@{size}-@{index}";

        .flex((@index + 1), @item);
    }

    .flex(@index, @list) when (@index =< @layout-flexes)
    {
        @item: ~".flex-@{size}-@{index}";

        .flex((@index + 1), ~"@{list}, @{item}");
    }

    .flex(@index, @list) when (@index > @layout-flexes)
    {
        @{list}
        {
            float: left;
        }
    }

    .flex(1);
}

//
// #private 计算布局份数的宽度。
//
// #param @type [width] 必选项，类型。
// #param @index [number] 必选项，索引。
// #param @size [xs|sm|md|lg] 必选项，尺寸。
//
.calc-layout-flex(@type, @index, @size) when (@type = width) and (@index > 0)
{
    .flex-@{size}-@{index}
    {
        width: percentage((@index / @layout-flexes));
    }
}

//
// #private 计算布局份数的排序。
//
// #param @type [push] 必选项，类型。
// #param @index [number] 必选项，索引。
// #param @size [xs|sm|md|lg] 必选项，尺寸。
//
.calc-layout-flex(@type, @index, @size) when (@type = push) and (@index > 0)
{
    .flex-@{size}-push-@{index}
    {
        left: percentage((@index / @layout-flexes));
    }
}

//
// #private 计算布局份数的排序。
//
// #param @type [push] 必选项，类型。
// #param @index [number] 必选项，索引。
// #param @size [xs|sm|md|lg] 必选项，尺寸。
//
.calc-layout-flex(@type, @index, @size) when (@type = push) and (@index = 0)
{
    .flex-@{size}-push-0
    {
        left: auto;
    }
}

//
// #private 计算布局份数的排序。
//
// #param @type [pull] 必选项，类型。
// #param @index [number] 必选项，索引。
// #param @size [xs|sm|md|lg] 必选项，尺寸。
//
.calc-layout-flex(@type, @index, @size) when (@type = pull) and (@index > 0)
{
    .flex-@{size}-pull-@{index}
    {
        right: percentage((@index / @layout-flexes));
    }
}

//
// #private 计算布局份数的排序。
//
// #param @type [pull] 必选项，类型。
// #param @index [number] 必选项，索引。
// #param @size [xs|sm|md|lg] 必选项，尺寸。
//
.calc-layout-flex(@type, @index, @size) when (@type = pull) and (@index = 0)
{
    .flex-@{size}-pull-0
    {
        right: auto;
    }
}

//
// #private 计算布局份数的排序。
//
// #param @type [pull] 必选项，类型。
// #param @index [number] 必选项，索引。
// #param @size [xs|sm|md|lg] 必选项，尺寸。
//
.calc-layout-flex(@type, @index, @size) when (@type = offset)
{
    .flex-@{size}-offset-@{index}
    {
        margin-left: percentage((@index / @layout-flexes));
    }
}

//
// #private 递归计算布局份数。
//
// #param @type [width|pull|push|offset] 必选项，类型。
// #param @index [number] 必选项，索引。
// #param @size [xs|sm|md|lg] 必选项，尺寸。
//
.loop-layout-flexes(@type, @index, @size) when (@index >= 0)
{
    .calc-layout-flex(@type, @index, @size);

    .loop-layout-flexes(@type, (@index - 1), @size);
}

// ============================= 其他(Other) ============================= //

.tab-focus()
{
    outline: thin dotted;
    outline: 5px auto -webkit-focus-ring-color;
    outline-offset: -2px;
}

.txt-emphasis-variant(@color)
{
    color: @color;

    a&:hover
    {
        color: darken(@color, 10%);
    }
}

.bg-variant(@color)
{
    background-color: @color;

    a&:hover
    {
        background-color: darken(@color, 10%);
    }
}
